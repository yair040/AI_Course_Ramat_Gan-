{
  "project": {
    "name": "Multiple Linear Regression: R² and Adjusted R² Comparison with Multicollinearity",
    "short_name": "r2_adjusted_r2_analysis",
    "version": "2.0.0",
    "author": "Yair Levi",
    "description": "Python application comparing R² and Adjusted R² metrics across independent and multicollinear models with 4-line visualization",
    "license": "MIT",
    "repository": "https://github.com/yourusername/r2-adjusted-r2-analysis",
    "created_date": "2025-10-03",
    "last_updated": "2025-10-03",
    "status": "active",
    "completion_percentage": 90,
    "key_feature": "Four-line comparative visualization of R² and Adjusted R² with multicollinearity demonstration"
  },
  
  "requirements": {
    "python_version": ">=3.6",
    "dependencies": {
      "numpy": ">=1.19.0",
      "matplotlib": ">=3.2.0"
    },
    "dev_dependencies": {
      "pytest": ">=6.0.0",
      "pytest-cov": ">=2.10.0",
      "pylint": ">=2.6.0",
      "black": ">=20.8b1",
      "jupyter": ">=1.0.0",
      "pandas": ">=1.0.0"
    }
  },
  
  "configuration": {
    "model_specifications": {
      "original_model": {
        "name": "Independent Predictors Model",
        "num_predictors": 50,
        "predictor_type": "independent",
        "description": "Baseline model with statistically independent predictors"
      },
      "extended_model": {
        "name": "Multicollinear Model",
        "num_predictors": 55,
        "original_predictors": 50,
        "dependent_predictors": 5,
        "predictor_type": "mixed",
        "description": "Extended model with 5 dependent predictors creating multicollinearity"
      },
      "common_specifications": {
        "num_samples": 100,
        "num_epsilon_values": 20,
        "random_seed": 42
      }
    },
    
    "coefficient_generation": {
      "beta_0": {
        "distribution": "uniform",
        "min": -0.5,
        "max": 0.5,
        "description": "Intercept coefficient",
        "used_in": ["original_model", "extended_model"]
      },
      "beta_original": {
        "distribution": "uniform",
        "min": -0.9,
        "max": 0.9,
        "count": 50,
        "description": "Slope coefficients for original predictors",
        "used_in": ["original_model", "extended_model"]
      },
      "beta_dependent": {
        "distribution": "uniform",
        "min": -0.9,
        "max": 0.9,
        "count": 5,
        "description": "Slope coefficients for dependent predictors",
        "used_in": ["extended_model"]
      },
      "random_seed": {
        "base_seed": 42,
        "original_coefficients": 42,
        "dependent_coefficients": 92,
        "description": "Seeds for reproducibility"
      }
    },
    
    "predictor_generation": {
      "original_predictors": {
        "distribution": "normal",
        "mean": 0,
        "std_dev": 1,
        "shape": [100, 50],
        "independence": true,
        "description": "Independent predictors from Normal(0,1)"
      },
      "dependent_predictors": {
        "count": 5,
        "creation_method": "linear_combination",
        "num_predictors_to_combine": [2, 3],
        "weight_distribution": "uniform",
        "weight_range": [-1, 1],
        "noise_std": 0.1,
        "description": "Linear combinations of original predictors with small noise"
      }
    },
    
    "epsilon_specification": {
      "type": "fixed_noise",
      "distribution": "uniform",
      "min": -3.5,
      "max": 3.5,
      "num_values": 20,
      "spacing": "linear",
      "description": "Fixed bias values added to all predictions"
    },
    
    "metrics": {
      "r_squared": {
        "name": "R-squared",
        "symbol": "R²",
        "formula": "1 - (SS_res / SS_tot)",
        "calculation_method": "dot_product",
        "properties": [
          "Always increases with more predictors",
          "Does not account for model complexity",
          "Range: (-∞, 1], typically [0, 1]"
        ],
        "calculated_for": ["original_model", "extended_model"]
      },
      "adjusted_r_squared": {
        "name": "Adjusted R-squared",
        "symbol": "Adj R²",
        "formula": "1 - [(1 - R²) × (n - 1) / (n - p - 1)]",
        "calculation_method": "formula_based",
        "parameters": {
          "n": "number of samples",
          "p": "number of predictors (excluding intercept)"
        },
        "adjustment_factors": {
          "original_model": 2.02,
          "extended_model": 2.25
        },
        "properties": [
          "Penalizes for adding predictors",
          "Can decrease with unhelpful predictors",
          "Better for model comparison",
          "Can be negative"
        ],
        "calculated_for": ["original_model", "extended_model"]
      },
      "penalty": {
        "name": "Penalty",
        "formula": "R² - Adjusted R²",
        "description": "Gap between R² and Adjusted R²",
        "interpretation": "Larger penalty indicates more predictors relative to sample size",
        "calculated_for": ["original_model", "extended_model"]
      }
    },
    
    "calculation_method": {
      "prediction_method": "dot_product",
      "formula": "Y_linear = np.dot(X_augmented, coefficients)",
      "augmented_matrix": true,
      "r_squared_method": "dot_product",
      "ss_res_formula": "np.dot(residuals, residuals)",
      "ss_tot_formula": "np.dot(deviations, deviations)",
      "adjusted_r_squared_method": "formula",
      "vectorized": true,
      "use_loops": false
    },
    
    "visualization": {
      "figure_size": [16, 9],
      "dpi": 100,
      "title": "R² and Adjusted R² Comparison: Independent vs Multicollinear Models",
      "subtitle": "Effect of Dependent Predictors on Model Performance Metrics",
      
      "lines": {
        "r2_original": {
          "color": "blue",
          "linestyle": "-",
          "linewidth": 2.5,
          "marker": "o",
          "markersize": 8,
          "markerfacecolor": "lightblue",
          "markeredgecolor": "navy",
          "alpha": 0.8,
          "label": "R² - Original (50 predictors)",
          "zorder": 4
        },
        "adj_r2_original": {
          "color": "blue",
          "linestyle": "--",
          "linewidth": 2,
          "marker": "^",
          "markersize": 6,
          "markerfacecolor": "cyan",
          "markeredgecolor": "navy",
          "alpha": 0.8,
          "label": "Adj R² - Original (50 predictors)",
          "zorder": 3
        },
        "r2_extended": {
          "color": "green",
          "linestyle": "-",
          "linewidth": 2.5,
          "marker": "s",
          "markersize": 7,
          "markerfacecolor": "lightgreen",
          "markeredgecolor": "darkgreen",
          "alpha": 0.8,
          "label": "R² - With multicollinearity (55 predictors)",
          "zorder": 2
        },
        "adj_r2_extended": {
          "color": "green",
          "linestyle": "--",
          "linewidth": 2,
          "marker": "d",
          "markersize": 6,
          "markerfacecolor": "lime",
          "markeredgecolor": "darkgreen",
          "alpha": 0.8,
          "label": "Adj R² - With multicollinearity (55 predictors)",
          "zorder": 1
        }
      },
      
      "reference_lines": {
        "perfect_fit": {
          "type": "horizontal",
          "y": 1.0,
          "color": "red",
          "linestyle": "--",
          "linewidth": 1,
          "alpha": 0.4,
          "label": "Perfect fit (R²=1)"
        },
        "medium_fit": {
          "type": "horizontal",
          "y": 0.5,
          "color": "orange",
          "linestyle": "--",
          "linewidth": 1,
          "alpha": 0.3,
          "label": "R²=0.5"
        },
        "no_fit": {
          "type": "horizontal",
          "y": 0.0,
          "color": "gray",
          "linestyle": "--",
          "linewidth": 1,
          "alpha": 0.3,
          "label": "R²=0"
        },
        "zero_epsilon": {
          "type": "vertical",
          "x": 0.0,
          "color": "purple",
          "linestyle": ":",
          "linewidth": 2,
          "alpha": 0.5,
          "label": "ε=0 (no noise)"
        }
      },
      
      "annotations": {
        "metrics_box": {
          "position": [0.02, 0.98],
          "transform": "axes",
          "verticalalignment": "top",
          "horizontalalignment": "left",
          "bbox": {
            "boxstyle": "round",
            "facecolor": "yellow",
            "alpha": 0.8
          },
          "fontsize": 9,
          "family": "monospace",
          "content": "At ε≈0: R² and Adj R² for both models"
        },
        "explanation_box": {
          "position": [0.98, 0.02],
          "transform": "axes",
          "verticalalignment": "bottom",
          "horizontalalignment": "right",
          "bbox": {
            "boxstyle": "round",
            "facecolor": "lightblue",
            "alpha": 0.8
          },
          "fontsize": 9,
          "content": "Key Insights about solid/dashed lines and penalties"
        }
      },
      
      "labels": {
        "xlabel": "Epsilon (Fixed Noise Value)",
        "ylabel": "R² / Adjusted R² (Coefficient of Determination)",
        "xlabel_fontsize": 14,
        "ylabel_fontsize": 14,
        "title_fontsize": 15,
        "xlabel_fontweight": "bold",
        "ylabel_fontweight": "bold",
        "title_fontweight": "bold"
      },
      
      "grid": {
        "enabled": true,
        "alpha": 0.3,
        "color": "gray"
      },
      
      "legend": {
        "enabled": true,
        "fontsize": 10,
        "location": "best",
        "ncol": 2,
        "framealpha": 0.9
      },
      
      "axis_limits": {
        "ylim": [-0.1, 1.1],
        "xlim_padding": 0.2
      }
    },
    
    "output": {
      "console": {
        "verbose": true,
        "show_progress": true,
        "decimal_places": 6,
        "section_headers": true,
        "display_author": true,
        "show_metrics_comparison": true,
        "show_penalty_analysis": true,
        "show_key_findings": true
      },
      "export": {
        "enabled": false,
        "formats": ["csv", "json", "png"],
        "output_directory": "./output",
        "files": {
          "csv": "r2_adjusted_r2_results.csv",
          "json": "r2_adjusted_r2_results.json",
          "plot": "r2_adjusted_r2_comparison.png"
        }
      }
    }
  },
  
  "file_structure": {
    "source_files": [
      "multiple_regression_r2_epsilon.py"
    ],
    "documentation": [
      "README_R2_AdjustedR2.md",
      "PRD_R2_AdjustedR2_Analysis.md",
      "PROJECT_TASKS_R2_AdjustedR2.md"
    ],
    "config_files": [
      "config_r2_adjusted_r2.json",
      "requirements.txt"
    ],
    "test_files": [
      "tests/test_adjusted_r_squared.py",
      "tests/test_dependent_predictors.py",
      "tests/test_four_line_visualization.py",
      "tests/test_penalty_calculation.py",
      "tests/test_complete_workflow.py"
    ],
    "examples": [
      "examples/basic_usage.py",
      "examples/different_epsilon_ranges.py",
      "examples/more_dependent_predictors.py",
      "examples/comparing_penalties.py"
    ],
    "notebooks": [
      "notebooks/r2_vs_adjusted_r2_tutorial.ipynb",
      "notebooks/multicollinearity_demonstration.ipynb",
      "notebooks/penalty_mechanism_explained.ipynb"
    ]
  },
  
  "testing": {
    "framework": "pytest",
    "coverage_target": 90,
    
    "test_scenarios": [
      {
        "name": "default_configuration",
        "description": "Test with default parameters (50 vs 55 predictors)",
        "parameters": {
          "num_original_predictors": 50,
          "num_dependent_predictors": 5,
          "num_samples": 100,
          "epsilon_range": [-3.5, 3.5],
          "seed": 42
        },
        "expected": {
          "extended_penalty_larger": true,
          "adjusted_r2_less_than_r2": true,
          "four_lines_visible": true,
          "execution_time_seconds": "<3"
        }
      },
      {
        "name": "high_multicollinearity",
        "description": "Test with many dependent predictors",
        "parameters": {
          "num_dependent_predictors": 20
        },
        "expected": {
          "penalty_difference_large": true,
          "adjusted_r2_difference_obvious": true
        }
      },
      {
        "name": "low_multicollinearity",
        "description": "Test with few dependent predictors",
        "parameters": {
          "num_dependent_predictors": 2
        },
        "expected": {
          "penalty_difference_small": true,
          "models_similar": true
        }
      },
      {
        "name": "narrow_epsilon_range",
        "description": "Test with low noise levels",
        "parameters": {
          "epsilon_range": [-1.0, 1.0]
        },
        "expected": {
          "all_metrics_high": true,
          "penalties_small": true
        }
      },
      {
        "name": "wide_epsilon_range",
        "description": "Test with high noise levels",
        "parameters": {
          "epsilon_range": [-10.0, 10.0]
        },
        "expected": {
          "negative_adjusted_r2_possible": true,
          "large_metric_variation": true
        }
      }
    ],
    
    "validation": {
      "r_squared_range": [-5.0, 1.0],
      "adjusted_r_squared_range": [-10.0, 1.0],
      "penalty_range": [0.0, 1.0],
      "adjustment_factor_original": 2.02,
      "adjustment_factor_extended": 2.25,
      "expected_penalty_ratio": ">1.0",
      "execution_time_max_seconds": 3,
      "memory_usage_max_mb": 100
    },
    
    "unit_tests": {
      "adjusted_r_squared": [
        "test_perfect_fit",
        "test_poor_fit",
        "test_adjustment_factor",
        "test_penalty_calculation",
        "test_negative_r_squared",
        "test_edge_cases"
      ],
      "dependent_predictors": [
        "test_shape_correct",
        "test_linear_combination",
        "test_correlation_exists",
        "test_not_perfectly_collinear",
        "test_noise_added"
      ],
      "four_line_plot": [
        "test_four_arrays_accepted",
        "test_all_lines_visible",
        "test_annotations_present",
        "test_legend_complete"
      ],
      "penalty_comparison": [
        "test_extended_penalty_larger",
        "test_penalty_positive",
        "test_penalty_increases_with_predictors"
      ]
    }
  },
  
  "performance": {
    "benchmarks": {
      "coefficient_generation_ms": 1,
      "x_generation_original_ms": 5,
      "x_generation_extended_ms": 7,
      "dependent_predictor_creation_ms": 3,
      "y_calculation_per_epsilon_ms": 1,
      "r_squared_per_epsilon_ms": 0.5,
      "adjusted_r_squared_per_epsilon_ms": 0.1,
      "all_40_calculations_ms": 80,
      "visualization_ms": 600,
      "total_execution_seconds": 2
    },
    "memory": {
      "coefficients_original_bytes": 408,
      "coefficients_extended_bytes": 448,
      "x_original_kb": 40,
      "x_extended_kb": 44,
      "y_vectors_total_kb": 16,
      "metric_arrays_kb": 1,
      "total_data_kb": 100,
      "max_usage_mb": 50
    },
    "scalability": {
      "max_predictors_tested": 200,
      "max_samples_tested": 1000,
      "max_dependent_predictors_tested": 50,
      "performance_acceptable_up_to": {
        "predictors": 100,
        "samples": 500,
        "dependent_predictors": 20
      }
    }
  },
  
  "mathematical_specifications": {
    "r_squared": {
      "formula": "R² = 1 - (SS_res / SS_tot)",
      "ss_res": "Σ(yᵢ - ŷᵢ)² = dot(residuals, residuals)",
      "ss_tot": "Σ(yᵢ - ȳ)² = dot(deviations, deviations)",
      "properties": {
        "range": "(-∞, 1]",
        "typical_range": "[0, 1]",
        "monotonic": "Always increases with more predictors",
        "penalizes_complexity": false
      }
    },
    "adjusted_r_squared": {
      "formula": "Adj R² = 1 - [(1 - R²) × (n - 1) / (n - p - 1)]",
      "adjustment_factor": "(n - 1) / (n - p - 1)",
      "for_original_model": {
        "n": 100,
        "p": 50,
        "factor": 2.02
      },
      "for_extended_model": {
        "n": 100,
        "p": 55,
        "factor": 2.25
      },
      "properties": {
        "range": "(-∞, 1]",
        "monotonic": false,
        "penalizes_complexity": true,
        "better_for_comparison": true
      }
    },
    "penalty": {
      "formula": "Penalty = R² - Adj R²",
      "expanded_formula": "(1 - R²) × p / (n - p - 1)",
      "interpretation": "Cost of adding predictors",
      "expected_behavior": "Larger with more predictors"
    },
    "multicollinearity_effect": {
      "on_r_squared": "May increase (captures noise)",
      "on_adjusted_r_squared": "May decrease (penalty > gain)",
      "detection": "Large penalty difference between models"
    }
  },
  
  "educational_features": {
    "learning_objectives": [
      "Understand difference between R² and Adjusted R²",
      "Learn why Adjusted R² is better for model comparison",
      "Recognize multicollinearity effects on metrics",
      "Understand penalty mechanism in Adjusted R²",
      "Learn when to use which metric",
      "Master dot product operations in statistics"
    ],
    "key_concepts": [
      {
        "concept": "R² (Coefficient of Determination)",
        "description": "Proportion of variance explained by model"
      },
      {
        "concept": "Adjusted R²",
        "description": "R² adjusted for number of predictors"
      },
      {
        "concept": "Penalty",
        "description": "Gap between R² and Adjusted R² due to model complexity"
      },
      {
        "concept": "Multicollinearity",
        "description": "High correlation among predictor variables"
      },
      {
        "concept": "Model Comparison",
        "description": "Using Adjusted R² for fair comparison"
      },
      {
        "concept": "Overfitting",
        "description": "Adding predictors that don't improve true fit"
      }
    ],
    "demonstrations": [
      "R² always increases with more predictors",
      "Adjusted R² can decrease with unhelpful predictors",
      "Larger penalty with more predictors",
      "Multicollinearity inflates R² but not Adjusted R²",
      "Visual comparison makes differences obvious",
      "Four-line plot shows all relationships simultaneously"
    ],
    "suitable_for": [
      "Undergraduate statistics courses (regression analysis)",
      "Graduate data science programs (model evaluation)",
      "Machine learning bootcamps (overfitting prevention)",
      "Research methods courses (proper model selection)",
      "Self-study learners (understanding metrics)"
    ]
  },
  
  "quality_metrics": {
    "code_quality": {
      "pep8_compliance": true,
      "docstring_coverage": 100,
      "max_function_length": 60,
      "max_complexity": 12,
      "type_hints": false,
      "inline_comments": true
    },
    "test_quality": {
      "unit_test_coverage": 90,
      "integration_test_coverage": 85,
      "manual_test_scenarios": 5
    },
    "accuracy": {
      "r_squared_accuracy": "6 decimal places",
      "adjusted_r_squared_accuracy": "6 decimal places",
      "penalty_accuracy": "6 decimal places",
      "dot_product_equivalence": "machine precision"
    },
    "documentation": {
      "readme_completeness": 100,
      "prd_completeness": 100,
      "inline_documentation": 100,
      "examples_provided": true,
      "troubleshooting_guide": true,
      "educational_explanations": true
    }
  },
  
  "deployment": {
    "platforms": ["Windows", "macOS", "Linux"],
    "python_environments": ["system", "virtualenv", "conda", "docker"],
    "installation_method": "pip install -r requirements.txt",
    "entry_point": "python multiple_regression_r2_epsilon.py",
    "distribution_channels": [
      "GitHub repository",
      "PyPI package (future)",
      "Educational platforms",
      "University course materials"
    ]
  },
  
  "validation_criteria": {
    "functional": [
      "Original model (50 predictors) works correctly",
      "Extended model (55 predictors) works correctly",
      "5 dependent predictors created successfully",
      "R² calculated for both models",
      "Adjusted R² calculated for both models",
      "Penalty calculated for both models",
      "All 4 lines visible in graph",
      "Extended model shows larger penalty"
    ],
    "technical": [
      "Uses dot product for predictions",
      "Uses dot product for R² calculation",
      "Adjusted R² formula correct",
      "No explicit loops in calculations",
      "All operations vectorized",
      "Execution time < 3 seconds",
      "Memory usage < 100MB"
    ],
    "visual": [
      "4 distinct lines visible",
      "Colors/styles distinguishable",
      "Annotations readable",
      "Legend complete",
      "Reference lines present",
      "No overlapping elements"
    ],
    "educational": [
      "R² vs Adjusted R² difference clear",
      "Multicollinearity effect obvious",
      "Penalty mechanism explained",
      "Why Adjusted R² is better demonstrated",
      "Suitable for teaching purposes"
    ]
  },
  
  "known_issues": [
    {
      "id": 1,
      "severity": "low",
      "description": "With very high noise (|ε| > 5), Adjusted R² can become very negative",
      "status": "documented",
      "workaround": "Use moderate epsilon range [-5, 5]",
      "expected_behavior": true
    },
    {
      "id": 2,
      "severity": "low",
      "description": "Legend may be crowded with 4 lines",
      "status": "mitigated",
      "workaround": "Two-column layout implemented",
      "platform": "all"
    },
    {
      "id": 3,
      "severity": "low",
      "description": "Annotations may overlap if metrics very close",
      "status": "rare",
      "workaround": "Adjust positions manually if needed",
      "platform": "all"
    }
  ],
  
  "future_enhancements": [
    {
      "priority": "high",
      "feature": "VIF (Variance Inflation Factor) calculation",
      "description": "Quantify multicollinearity numerically",
      "estimated_effort": "2 days",
      "status": "planned"
    },
    {
      "priority": "high",
      "feature": "AIC/BIC metrics",
      "description": "Additional model comparison criteria",
      "estimated_effort": "2 days",
      "status": "planned"
    },
    {
      "priority": "medium",
      "feature": "CSV/JSON export",
      "description": "Export all metrics to file formats",
      "estimated_effort": "1 day",
      "status": "planned"
    },
    {
      "priority": "medium",
      "feature": "Interactive visualization",
      "description": "Use plotly for interactive 4-line plot",
      "estimated_effort": "3 days",
      "status": "planned"
    },
    {
      "priority": "low",
      "feature": "Multiple subplot layout",
      "description": "Separate plots for each metric comparison",
      "estimated_effort": "2 days",
      "status": "future"
    },
    {
      "priority": "low",
      "feature": "Jupyter notebook tutorial",
      "description": "Interactive educational notebook",
      "estimated_effort": "3 days",
      "status": "future"
    }
  ],
  
  "metadata": {
    "keywords": [
      "multiple linear regression",
      "R-squared",
      "Adjusted R-squared",
      "coefficient of determination",
      "multicollinearity",
      "model comparison",
      "penalty mechanism",
      "dot product",
      "overfitting",
      "dependent predictors",
      "model evaluation",
      "statistical metrics",
      "educational tool"
    ],
    "topics": [
      "statistics",
      "regression analysis",
      "model evaluation",
      "machine learning",
      "data science",
      "numerical computing",
      "multicollinearity detection"
    ],
    "difficulty_level": "intermediate-advanced",
    "target_audience": [
      "statistics students",
      "data science learners",
      "machine learning practitioners",
      "researchers",
      "educators"
    ],
    "educational_level": "undergraduate/graduate"
  },
  
  "contact": {
    "author": "Yair Levi",
    "email": "contact@example.com",
    "github": "https://github.com/yourusername",
    "issues": "https://github.com/yourusername/r2-adjusted-r2-analysis/issues",
    "discussions": "https://github.com/yourusername/r2-adjusted-r2-analysis/discussions"
  },
  
  "changelog": [
    {
      "version": "2.0.0",
      "date": "2025-10-03",
      "changes": [
        "Added Adjusted R² calculation",
        "Implemented 4-line comparative visualization",
        "Added penalty mechanism demonstration",
        "Enhanced output with penalty analysis",
        "Improved annotations with two text boxes",
        "Updated documentation for Adjusted R²",
        "Author: Yair Levi"
      ],
      "breaking_changes": [
        "Plotting function signature changed (now accepts 4 arrays)"
      ]
    },
    {
      "version": "1.5.0",
      "date": "2025-10-03",
      "changes": [
        "Added multicollinearity comparison",
        "Implemented dependent predictor generation",
        "Added 2-line visualization (R² only)",
        "Extended model with 55 predictors"
      ],
      "breaking_changes": []
    },
    {
      "version": "1.0.0",
      "date": "2025-10-03",
      "changes": [
        "Initial implementation with R² only",
        "Original model with 50 predictors",
        "Fixed noise analysis",
        "Dot product operations"
      ],
      "breaking_changes": []
    }
  ]
}
